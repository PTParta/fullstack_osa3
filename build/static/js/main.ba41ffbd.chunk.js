(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),o=t.n(r),a=t(15),i=t.n(a),u=(t(21),t(6)),l=t(3),s=t(4),d=t.n(s),j="/api/persons",b={getAll:function(){var e=d.a.get(j);return console.log("personService.getAll()"),e.then((function(e){return e.data}))},create:function(e){var n=d.a.post(j,e);return console.log("personService.create()"),n.then((function(e){return e.data}))},remove:function(e){return console.log("personService.remove() id:",e),d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e){var n=j+"/"+e.id;return console.log("personService.update() person:",e),d.a.put(n,e).then((function(e){return e.data}))}},f=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},h=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},m=function(e){var n=e.handleFilterChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:n})]})},O=function(e){var n=e.handleNameChange,t=e.handleNumberChange,r=e.addPerson,o=e.newName,a=e.newNumber;return Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:o,onChange:n})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:a,onChange:t})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.filter,r=e.handleRemove,o=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsx)("div",{children:o.map((function(e){return Object(c.jsx)("div",{children:Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:Object(c.jsxs)("tr",{children:[Object(c.jsxs)("td",{children:[e.name," ",e.number]}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name," ?"))&&r(e.id)},children:"delete"})})]})})})},e.name)}))})},g=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),i=Object(l.a)(a,2),s=i[0],d=i[1],j=Object(r.useState)(""),g=Object(l.a)(j,2),p=g[0],x=g[1],w=Object(r.useState)(""),C=Object(l.a)(w,2),S=C[0],N=C[1],T=Object(r.useState)(null),k=Object(l.a)(T,2),F=k[0],y=k[1],P=Object(r.useState)(null),A=Object(l.a)(P,2),D=A[0],L=A[1];Object(r.useEffect)((function(){b.getAll().then((function(e){o(e)}))}),[]);var R=function(e){var n=t.find((function(n){return n.name===e})),c=Object(u.a)(Object(u.a)({},n),{},{number:p});console.log("changed person",c),b.update(c).then((function(c){o(t.map((function(e){return e.id!==n.id?e:c}))),y("Updated ".concat(e)),setTimeout((function(){y(null)}),3e3)})).catch((function(c){L("Information of ".concat(e," has already been removed from server")),o(t.filter((function(e){return e.id!==n.id}))),setTimeout((function(){L(null)}),3e3)}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(f,{message:F}),Object(c.jsx)(h,{message:D}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{handleFilterChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsx)(O,{handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},handleNumberChange:function(e){x(e.target.value)},addPerson:function(e){if(e.preventDefault(),console.log("button clicked",e.target),t.map((function(e){return e.name})).includes(s)){if(!window.confirm("".concat(s," is already added to phonebook. Replace the old number with a new one?")))return;R(s)}else{var n={name:s,number:p};o(t.concat(n)),d(""),b.create(n).then((function(e){o(t.concat(e)),y("Added ".concat(s)),setTimeout((function(){y(null)}),3e3)})).catch((function(e){o(t.filter((function(e){return e.name!==n.name}))),L(e.response.data.error),setTimeout((function(){L(null)}),3e3)}))}},newName:s,newNumber:p}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(v,{persons:t,filter:S,handleRemove:function(e){console.log("handleRemove",e),b.remove(e).then((function(n){o(t.filter((function(n){return n.id!==e}))),y("Deleted ".concat(t.find((function(n){return n.id===e})).name)),setTimeout((function(){y(null)}),3e3)}))}})]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),c(e),r(e),o(e),a(e)}))};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),p()}},[[40,1,2]]]);
//# sourceMappingURL=main.ba41ffbd.chunk.js.map